{
  "title": "Qwen Image Serverless Worker",
  "description": "Serverless Runpod worker for Qwen/Qwen-Image with a drop-in Public Endpoint contract.",
  "type": "serverless",
  "category": "image",
  "config": {
    "runsOn": "GPU",
    "containerDiskInGb": 40,
    "gpuCount": 1,
    "gpuIds": "RTX 6000 Ada,RTX A6000,NVIDIA GeForce RTX 4090",
    "allowedCudaVersions": [
      "12.4",
      "12.3",
      "12.2",
      "12.1",
      "12.0"
    ],
    "env": [
      {
        "key": "HF_TOKEN",
        "input": {
          "name": "Hugging Face access token",
          "type": "string",
          "description": "Recommended to avoid anonymous rate limits when downloading Qwen/Qwen-Image."
        }
      },
      {
        "key": "MODEL_ID",
        "input": {
          "name": "Model repository",
          "type": "string",
          "description": "Hugging Face repo id to load (defaults to the official Qwen/Qwen-Image weights).",
          "default": "Qwen/Qwen-Image"
        }
      },
      {
        "key": "DEFAULT_WIDTH",
        "input": {
          "name": "Default width",
          "type": "number",
          "description": "Fallback width (must be divisible by RESOLUTION_STEP).",
          "default": 1024
        }
      },
      {
        "key": "DEFAULT_HEIGHT",
        "input": {
          "name": "Default height",
          "type": "number",
          "description": "Fallback height (must be divisible by RESOLUTION_STEP).",
          "default": 1024
        }
      },
      {
        "key": "RESOLUTION_STEP",
        "input": {
          "name": "Resolution step",
          "type": "number",
          "description": "All width/height inputs must be divisible by this value.",
          "default": 16,
          "advanced": true
        }
      },
      {
        "key": "DEFAULT_INFERENCE_STEPS",
        "input": {
          "name": "Default inference steps",
          "type": "number",
          "description": "Steps to use when the request omits num_inference_steps (30 is a good quality default).",
          "default": 30
        }
      },
      {
        "key": "DEFAULT_GUIDANCE",
        "input": {
          "name": "Default guidance",
          "type": "number",
          "description": "Guidance scale fallback (feeds Qwen's true_cfg_scale).",
          "default": 4.0
        }
      },
      {
        "key": "DEFAULT_IMAGE_FORMAT",
        "input": {
          "name": "Default image format",
          "type": "string",
          "description": "Output container when the request does not include image_format.",
          "options": [
            { "label": "JPEG", "value": "jpeg" },
            { "label": "PNG", "value": "png" }
          ],
          "default": "jpeg"
        }
      },
      {
        "key": "PRICE_PER_MEGAPIXEL",
        "input": {
          "name": "Reported price per megapixel",
          "type": "number",
          "description": "Used only for the cost field in the handler response.",
          "default": 0.004,
          "advanced": true
        }
      },
      {
        "key": "MAX_INFERENCE_STEPS",
        "input": {
          "name": "Maximum inference steps",
          "type": "number",
          "description": "Upper bound for num_inference_steps (50 for the base model).",
          "default": 50,
          "advanced": true
        }
      },
      {
        "key": "MAX_RESOLUTION",
        "input": {
          "name": "Maximum resolution edge",
          "type": "number",
          "description": "Clamp for width/height (defaults to 1664).",
          "default": 1664,
          "advanced": true
        }
      },
      {
        "key": "LIGHTNING_LORA_PATH",
        "input": {
          "name": "Lightning LoRA path",
          "type": "string",
          "description": "Absolute path to a ModelTC Qwen-Image-Lightning .safetensors file (optional).",
          "advanced": true
        }
      },
      {
        "key": "LIGHTNING_LORA_REPO_ID",
        "input": {
          "name": "Lightning LoRA repo id",
          "type": "string",
          "description": "Hugging Face repo to auto-download the Lightning LoRA. Requires LIGHTNING_LORA_FILENAME.",
          "advanced": true
        }
      },
      {
        "key": "LIGHTNING_LORA_FILENAME",
        "input": {
          "name": "Lightning LoRA filename",
          "type": "string",
          "description": "File inside the repo specified in LIGHTNING_LORA_REPO_ID.",
          "advanced": true
        }
      },
      {
        "key": "LIGHTNING_DEFAULT_STEPS",
        "input": {
          "name": "Lightning default steps",
          "type": "number",
          "description": "Default num_inference_steps when a Lightning LoRA is active.",
          "default": 8,
          "advanced": true
        }
      },
      {
        "key": "LIGHTNING_DEFAULT_GUIDANCE",
        "input": {
          "name": "Lightning default guidance",
          "type": "number",
          "description": "Default true_cfg_scale when a Lightning LoRA is active.",
          "default": 1.0,
          "advanced": true
        }
      }
    ],
    "presets": [
      {
        "name": "Quality 1K",
        "defaults": {
          "DEFAULT_WIDTH": 1024,
          "DEFAULT_HEIGHT": 1024,
          "DEFAULT_INFERENCE_STEPS": 28,
          "DEFAULT_GUIDANCE": 4.0
        }
      },
      {
        "name": "Lightning 4-step",
        "defaults": {
          "DEFAULT_WIDTH": 1216,
          "DEFAULT_HEIGHT": 832,
          "DEFAULT_INFERENCE_STEPS": 4,
          "DEFAULT_GUIDANCE": 1.0,
          "LIGHTNING_DEFAULT_STEPS": 4,
          "LIGHTNING_DEFAULT_GUIDANCE": 1.0
        }
      }
    ]
  }
}
